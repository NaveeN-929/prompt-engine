# Development override for docker-compose.yml
# Use: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

version: '3.8'

services:
  prompt-engine:
    environment:
      - FLASK_DEBUG=true
    volumes:
      # Mount source code for hot reloading
      - .:/app
      # Exclude virtual environment to prevent conflicts
      - /app/prompt_engine_env
    command: python server.py
    # Override restart policy for development
    restart: "no"
    
  # Optional: Reduce resource usage for development
  ollama:
    # Use smaller model for development
    environment:
      - OLLAMA_HOST=0.0.0.0
    # Don't restart automatically in dev
    restart: "no"